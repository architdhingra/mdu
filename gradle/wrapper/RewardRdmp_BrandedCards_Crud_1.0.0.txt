{
	"swagger": "2.0",

	"info": {
		"title": "RewardRdmp_BrandedCards_Crud",
		"description": "Rewards redemption history for Credit Card customer. PCF Deployment Reference name -->BRD-RWD-C-RewardRdmp.<br> Version 1.0.0 - Crud service for reward redemption history",
		"version": "1.0.0",
		"x-ibm-name": "RewardRdmp_BrandedCards_Domain"
	},

	"host": "127.0.0.1",
	"schemes": ["https"],
	"basePath": "/api",
	"produces": ["application/json"],
	"paths": {
		"/crud/v1/na/creditCards/accounts/rewards/redemption/history": {
			"post": {
				"summary": "API to get reward redemption history for credit card customers",
				"description": "API to get reward redemption history for credit card customers",
				"tags": ["RewardRedemptionHistroy"],
				"operationId": "getRewardRedemptionHistory",
				"consumes": ["application/json"],
				"produces": ["application/json"],
				"parameters": [{
						"name": "Accept-Language",
						"in": "header",
						"description": " List of acceptable human languages for response in ISO format",
						"type": "string",
						"required": false
					},
					{
						"name": "uuid",
						"in": "header",
						"description": "A 128 bit universally unique identifier (UUID) that you generate for every request and is used for tracking. It is recommended to use the output from Java UUID class or an equivalent",
						"type": "string",
						"required": true
					}, {
						"name": "citiUuid",
						"in": "header",
						"description": "Unique UUID generated by APIM for every request",
						"type": "string",
						"required": false
					}, {
						"name": "sid",
						"in": "header",
						"description": "User session id",
						"type": "string",
						"required": true
					}, {
						"name": "Accept",
						"in": "header",
						"description": "Content types that are acceptable for the response. Currently we support application/json",
						"type": "string",
						"required": true
					}, {
						"name": "Content-Type",
						"in": "header",
						"description": "This is the HTTP Content-Type, it is present only for PUT/POST methods",
						"required": true,
						"type": "string"
					}, {
						"name": "channelId",
						"in": "header",
						"description": "Channel ID used by the user",
						"type": "string",
						"required": true
					}, {
						"name": "businessCode",
						"in": "header",
						"description": " 3 character business code",
						"required": true,
						"type": "string"
					}, {
						"name": "countryCode",
						"in": "header",
						"description": "Country code in 2 character ISO 3166 format",
						"required": true,
						"type": "string"
					}, {
						"name": "hostConnect",
						"in": "header",
						"description": "AgentId, Agent access level (Only populated for IBS Assisted Channel), IBS Region, Customer Region; all values pipe delimited",
						"type": "string",
						"required": false
					},
					{
						"name": "RewardRedemptionHistoryRequest",
						"in": "body",
						"description": "Retrive all the available Reward Redemption History Request",
						"required": true,
						"schema": {
							"$ref": "#/definitions/RewardRedemptionHistoryRequest"
						}
					}
				],

				"responses": {
					"200": {
						"description": "Successful operation.",
						"schema": {
							"$ref": "#/definitions/RewardRedemptionHistoryResponse"
						},
						"headers": {
             						 "uuid": {
                						"description": "Echo back of the requestUUID",
                "type": "string"
              },
              "Content-Type": {
                "description": "The response Content-Type",
                "type": "string"
              },
              "citiUuid": {
                "description": "Echo back the Client CITIUUID received in the request",
                "type": "string"
              }
            }
					},
					"204": {
						"description": "No Content"
					},
					"400": {
						"description": "<table><tr><td>Type</td><td>Code</td><td>Details</td></tr><tr><td>error</td><td>invalidRequest</td><td>Missing or invalid Parameters</td></tr></table>",
						"schema": {
							"$ref": "#/definitions/ErrorResponse"
						}

					},
					"403": {
						"description": "<table><tr><td>Type</td><td>Code</td><td>Details</td><td>More Info</td></tr><tr><td>error</td><td>accessNotConfigured</td><td>The request operation is not configured to access this resource</td><td>Channel/Country/Business provided in the request is not supported currently</td></tr></table>",
						"schema": {
							"$ref": "#/definitions/ErrorResponse"
						}
					},

					"404": {
						"description": "<table><tr><td>Type</td><td>Code</td><td>Details</td></tr><tr><td>error</td><td>resourceNotFound</td><td>The requested resource was not found</td></tr></table>",
						"schema": {
							"$ref": "#/definitions/ErrorResponse"
						}
					},
					"500": {
						"description": "<table><tr><td>Type</td><td>Code</td><td>Details</td></tr><tr><td>fatal</td><td>serverUnavailable</td><td>The request failed due to an internal error/server unavailability</td></tr></table>",
						"schema": {
							"$ref": "#/definitions/ErrorResponse"
						}
					}
				}
			}
		},
		"/crud/v1/na/creditCards/accounts/{cltId}/rewards/giftCard/redemption/history": {
			"get": {
				"tags": ["GiftCardRedemptionHistory"],
				"summary": "API for gift card redmeption history.",
				"operationId": "getGiftCardRedemptionHistory",
				"consumes": ["application/json"],
				"produces": ["application/json"],
				"parameters": [{
						"name": "uuid",
						"in": "header",
						"description": "A 128 bit universally unique identifier (UUID) that you generate for every request and is used for tracking. It is recommended to use the output from Java UUID class or an equivalent",
						"type": "string",
						"required": true
					},
					{
						"name": "cltId",
						"in": "path",
						"type": "string",
						"description": "Abilitec - consumer link token acct id. Used by Acxiom in their relationship file.",
						"required": true
					},
					{
						"name": "citiUuid",
						"in": "header",
						"description": "Unique UUID generated by APIM for every request",
						"type": "string",
						"required": false
					}, {
						"name": "sid",
						"in": "header",
						"description": "User session id",
						"type": "string",
						"required": true
					}, {
						"name": "Accept",
						"in": "header",
						"description": "Content types that are acceptable for the response. Currently we support application/json",
						"type": "string",
						"required": true
					}, {
						"name": "channelId",
						"in": "header",
						"description": "Channel ID used by the user",
						"type": "string",
						"required": true
					}, {
						"name": "businessCode",
						"in": "header",
						"description": " 3 character business code",
						"required": true,
						"type": "string"
					}, {
						"name": "countryCode",
						"in": "header",
						"description": "Country code in 2 character ISO 3166 format",
						"required": true,
						"type": "string"
					}, {
						"name": "hostConnect",
						"in": "header",
						"description": "AgentId, Agent access level (Only populated for IBS Assisted Channel), IBS Region, Customer Region; all values pipe delimited",
						"type": "string",
						"required": false
					}

				],
				"responses": {
					"200": {
						"description": "Successful operation.",
						"schema": {
							"$ref": "#/definitions/GiftCardRewardResponse"
						},
						"headers": {
              "uuid": {
                "description": "Echo back of the requestUUID",
                "type": "string"
              },
              "Content-Type": {
                "description": "The response Content-Type",
                "type": "string"
              },
              "citiUuid": {
                "description": "Echo back the Client CITIUUID received in the request",
                "type": "string"
              }
            }
					},
					"204": {
						"description": "No Content"
					},

					"400": {
						"description": "<table><tr><td>Type</td><td>Code</td><td>Details</td></tr><tr><td>error</td><td>invalidRequest</td><td>Missing or invalid Parameters</td></tr></table>",
						"schema": {
							"$ref": "#/definitions/ErrorResponse"
						}

					},
					"403": {
						"description": "<table><tr><td>Type</td><td>Code</td><td>Details</td><td>More Info</td></tr><tr><td>error</td><td>accessNotConfigured</td><td>The request operation is not configured to access this resource</td><td>Channel/Country/Business provided in the request is not supported currently</td></tr></table>",
						"schema": {
							"$ref": "#/definitions/ErrorResponse"
						}
					},

					"404": {
						"description": "<table><tr><td>Type</td><td>Code</td><td>Details</td></tr><tr><td>error</td><td>resourceNotFound</td><td>The requested resource was not found</td></tr></table>",
						"schema": {
							"$ref": "#/definitions/ErrorResponse"
						}
					},
					"500": {
						"description": "<table><tr><td>Type</td><td>Code</td><td>Details</td></tr><tr><td>fatal</td><td>serverUnavailable</td><td>The request failed due to an internal error/server unavailability</td></tr></table>",
						"schema": {
							"$ref": "#/definitions/ErrorResponse"
						}
					}
				}
			}
		}
	},

	"definitions": {
		"RewardRedemptionHistoryRequest": {
		   "required" : [ "cardAccountNumber","cltId","rewardOfferId"],

			"properties": {
				"cardAccountNumber": {
					"description": "Unique identifier associated with the card account",
					"type": "string",
					"example": "5466160198147363"
				},

				"cltId": {
					"description": "Unique CLT ID created for the customer.Abilitec - consumer link token acct id. Used by Acxiom in their relationship file",
					"type": "string"
				},
				"rewardOfferId": {
					"type": "number",
					"description": "Reward Offer id or promo Id "
				}
			}
		},
		
		"RewardRedemptionHistoryResponse": {
				"properties": {
				  
					"rewardRedemptionHistory": {
						"type": "array",
						"items": {
							"$ref": "#/definitions/RewardRedemptionHistory"
						}
					}
		
			}
		},
		"RewardRedemptionHistory": {
			"properties": {
			  
			  "redemptionDate": {
							"type": "string",
							"format": "date",
							"description": "The Date when rewards are redeemed"
						},
			"redemptionAmount": {
					  "description": "Redemption Amount for the Program.",
				  	"type": "number",
				  	                "format": "BigDecimal",
					  "example": "100"
			  	  },
				
				"redemptionOption": {
					"type": "string",
					"description": "Reward Redemption Option used in redemption"
				},
				"redemptionStatus": {
							"description": "Current status of the redemption request",
							"type": "string",
							"enum": ["FUNDS_RETURNED'", "SUCCESSFUL"]
						},
			
				"cardAccountNumber": {
					"description": "Unique identifier associated with the card account",
					"type": "string",
					"example": "5466160198147363"
				},
				"bankAccount": {
					"$ref": "#/definitions/BankAccount"
				}

			}
		},
		"BankAccount": {
			"properties": {
				"routingNumber": {
					"type": "string",
					"description": "Routing number or routing transfer number used by banks to identify specific financial institutions within the United States. An ABA number is used for wires and electronic automatic clearing house (ACH) transactions such as electronic funds transfer, direct deposit, direct payment of consumer bills, e-checks, and tax payments, among others."
				},
				"bankAccountNumber": {
					"type": "string",
					"description": "This is the DDA number used along with routing number"
				},
				"bankName": {
					"description": "Bank Name",
					"type": "string"
				}
			}
		},
		"GiftCardRewardResponse": {
		  "properties": {
		  "giftCard": {
						"type": "array",
						"items": {
							"$ref": "#/definitions/GiftCard"
						}
					}
		  }
		},
		"GiftCard": {
			"properties": {
				"giftCardDescription": {
					"type": "string",
					"description": "Description of gift card",
					"example": "GiftCard"
				},
				"orderNumber": {
					"type": "string",
					"description": "Reference number to the order",
					"example": "123"
				},
				"itemNumber": {
					"type": "string",
					"description": "Unique reference to the item",
					"example": "123"
				},
				"giftCardRedemptionAmount": {
					"type": "number",
					 "format": "BigDecimal",
					"description": "Amount that can be redeemed through gift card",
					"example": "123"
				},
				"redemptionDate": {
					"type": "string",
					"format": "date",
					"description": "The gift card  redeemed date"
				},
				
						"giftCardStatus": {
							"description": "Current status of the gift card",
							"type": "string",
							"enum": ["CANCEL",
								"CANCEL_BACKORDER",
								"CANCEL_BACKORDER_REFERRAL",
								"FULFILLED",
								"PENDING",
								"PENDING_BACKORDER",
								"PENDING_BACKORDER_BAD_ADDRESS",
								"RETURN_DEFECTIVE",
								"RETURN_WRONG_ITEM",
								"SUBMITTED",
								"VOID_NEVER_RECEIVED"
							]

						}
			}
		},

		"ErrorResponse": {
			"properties": {
				"type": {
					"description": "Invalid - Request did not confirm to the specification and was unprocessed and rejected. Please fix the value and try again ",
					"type": "string",
					"enum": ["error",
						"warn",
						"invalid",
						"fatal"
					]
				},
				"code": {
					"description": "Error code which qualifies the error",
					"type": "string"
				},
				"details": {
					"description": "Human readable explanation specific to the occurrence of the problem",
					"type": "string"
				},
				"location": {
					"description": "The name of the field that resulted in the error",
					"type": "string"
				},
				"moreInfo": {
					"description": "URI to human readable documentation of the error",
					"type": "string"
				}
			},
			"required": ["type",
				"code"
			]

		}
	}
}